<template name="game">
  <h2>round <b>{{ round }}</b></h2>
  <p>
    <small>policy count</small>
    <br />
    <table class="policy-count">
      <tr>
        <td>
          <span style="font-size:2.0em;">{{ room.liberal }}</span>/5
        </td>
        <td>
          <span style="font-size:2.0em;">{{ room.fascist }}</span>/6
        </td>
      </tr>
      <tr>
        <td>
          <small>liberal</small>
        </td>
        <td>
          <small>fascist</small>
        </td>
      </tr>
    </table>
    failed elections: {{ room.electiontracker }}
  </p>

<!-- chancellor-candidate picking view -->
  {{# if president }}
    <p>
      <b style="color: #2187FF;">you are the president!</b><br />
      {{# if picking }}
        <span style="color: #1B9078;">choose your chancellor:</span>
      {{/ if }}
    </p>
  {{ else }}
    {{# if picking }}
      <p>waiting for the president...</p>
    {{/ if }}
  {{/ if }}

  {{# if chancellor }}
    <p>
      <b style="color: #1B9078;">you are the chancellor!</b><br />
    </p>
  {{/ if }}

  {{# if voting }}
    <p>
      voting...waiting for {{ votesleft }} {{ peopleOrperson votesleft }}<br />
      {{# if haventvoted }}
        <button class="yesvote-button">yes</button>
        <button class="novote-button">no</button>
      {{/ if }}
    </p>
  {{/ if }}

  {{# if votefailed }}
    <p>
      the vote failed...<br />
      waiting on {{ votecount }} {{ peopleOrperson votecount }}
    </p>
    {{# unless haventvoted }}
      <p><button class="fail-continue-button">continue</button></p>
    {{/ unless }}
  {{/ if }}

<!-- Policy picking view / what everyone sees -->
  {{# if votepassed }}
    {{# if equals room.policychoices.length 3 }}
      <p>the vote passed!</p>
    {{/ if }}
    <!-- president view -->
    {{# if president }}
      {{# if equals room.policychoices.length 3 }}
      <!-- when president is policy picking -->
      <p>choose a policy to discard</p>
      <p>
        {{# each policy in room.policychoices }}
          <button class="pick-{{ policy }}">{{ policy }}</button>
        {{/ each }}
      </p>
      <!-- when chancellor is picking policy aka policychoices.length = 2 -->
      {{ else }}
        {{# unless executiveaction }}
          <p>waiting for the chancellor...</p>
        {{/ unless }}
      {{/ if }}
  <!-- what table sees during policy picking -->
    {{ else }}
    <!-- chancellor view -->
      {{# if chancellor }}
        {{# if equals room.policychoices.length 2 }}
          <p>choose a policy to discard</p>
          <p>
            {{# each policy in room.policychoices }}
              <button class="pick-{{ policy }}">{{ policy }}</button>
            {{/ each }}
          </p>
        {{/ if }}
    <!-- everyone else's view -->
      {{ else }}
        {{# if equals room.policychoices.length 3 }}
          <p>waiting for the president...</p>
        {{ else }}
          {{# unless executiveaction }}
            <p>waiting for the chancellor...</p>
          {{/ unless }}
        {{/ if }}
      {{/ if }}
    {{/ if }}
  {{/ if }}

  <!-- discard server side, moves the room forward to next round -->
  {{# if executiveaction }}
    {{# if president }}

    <!-- Investigate Loyalty -->
    {{# if room.investigate }}
      {{# each suspect in room.suspects}}
        <button class="suspect" data-suspectid="{{ suspect.playerId }}">
          {{ suspect.name }}
        </button>
      {{/ each }}
    {{/ if  }}
    {{# if room.reveal }}
        <ul class="playerlist">
          {{# each suspect in room.suspected }}
            <li>{{ suspect.name }}({{ partymembership suspect }})</li>
          {{/ each }}
        </ul>
      <p><button class="investigate-continue-button">continue</button></p>
    {{/ if }}
    <!-- End of Investigate Loyalty -->

    <!-- Policy Peek -->
        {{# if equals room.peek.length 3 }}
          <p>Here are the next three Policies</p>
          <p>
            {{# each policy in room.peek }}
              <button>{{ policy }}</button>
            {{/ each }}
          </p>
          <p><button class="peek-continue-button">continue</button></p>
        {{/ if }}
    <!-- End of policy peek -->
    {{ else }}
      <p>waiting for executive action...</p>
    {{/ if }}
  {{/ if }}

  <ul class="ring circle-container-{{ players.length }}">
      {{# each players }}
        <li data-playerid={{ playerId }}>
          <span class={{ playercircle playerId }}>{{ name }}</span>
        </li>
      {{/ each }}
  </ul>

  <!-- make this a dropdown menu -->
  <button class="powers-button">Presidential Powers</button>
  <div class="presidential-powers" id="dropdown-menu">
    {{# each powers }}
      <li class ="power-name" data-powerid={{ id }}>{{ name }}</li>
      <p class="power-description" id="power-description-{{ id }}">{{ description }}</p>
    {{/ each }}
  </div>
</template>
